<%- include('./residentMenu.ejs'); %>
<script>
  function checkSetting() {
    let number = document.getElementById("residentPhone").value;
    console.log(number);
    if (/^[0-9]{3}-[0-9]{4}-[0-9]{4}$/.test(number)) {
      document.getElementById("checkPhoneMessage").innerText = "";
      alert("ë³€ê²½ ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
      return true;
    } else {
      document.getElementById("checkPhoneMessage").innerText = "010-0000-0000 í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
      return false;
    }
  }

  function checkPassword() {
    let pw = document.getElementById("newpw").value;
    let pw2 = document.getElementById("newpw2").value;
    if (pw !== pw2) {
      document.getElementById("checkpw").innerText = "ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.";
      return false;
    } else {
      document.getElementById("checkpw").innerText = "";
      return false;
    }
  }
</script>
<div class="mypage-container">
  <h3 class="mypage-hr">ê³„ì • ì •ë³´</h3>
  <form classname="user-setting" action="/resident/settings/update" method="post">
    <label class="user-label">ğŸ§¸ ì•„ì´ë””</label>
    <input class="uk-input uk-form-width-medium" name="username" value="<%= resident.r_username %>" placeholder="ì•„ì´ë””" readonly="true" />
    <br />
    <label class="user-label">âœ… ì‹¤ëª…</label>
    <input class="uk-input uk-form-width-medium" value="<%= resident.r_realname %>" />
    <br />
    <label class="user-label">ğŸ“ ì „í™”ë²ˆí˜¸</label>
    <input id="residentPhone" class="uk-input uk-form-width-medium" name="phone" value="<%= resident.r_phone %>" />
    <label id="checkPhoneMessage"></label>
    <br />
    <label class="user-label">ğŸ“¬ ì´ë©”ì¼</label>
    <input class="uk-input uk-form-width-medium" name="email" value="<%= resident.r_email %>" type="email" />
    <br />
    <label id="residentBirth" class="user-label">ğŸ‚ ìƒë…„ì›”ì¼</label>
    <input class="uk-input uk-form-width-medium" name="birth" type="date" max="new Date()" placeholder="ìƒë…„ì›”ì¼ ì…ë ¥í•˜ê³  íœ´ì§€ ë°›ê¸°" value="<%= resident.r_birth === null ? '' : Intl.DateTimeFormat("fr-CA", {year: "numeric", month: "2-digit", day: "2-digit"}).format(resident.r_birth) %>" />
    <br />
    <div>
      <label class="user-label">ğŸ§» ë‚˜ì˜ íœ´ì§€</label>
      <span class="uk-badge"><%= resident.r_point%></span>
      <span> â€»íœ´ì§€ë€? í›„ê¸°ë¥¼ ì—´ëŒí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í¬ì¸íŠ¸ì…ë‹ˆë‹¤. í›„ê¸°ë¥¼ ì‘ì„±í•˜ì—¬ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    </div>
    <button class=" user-submit-button uk-button uk-button-default" type="submit" onclick="return checkSetting()">ë³€ê²½ ë‚´ìš© ì €ì¥í•˜ê¸°</button>
  </form>
  <br />
  <h3 class="mypage-hr">ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</h3>
  <!-- <form classname="user-setting" action="/resident/settings/updatepassword" method="post"> -->
  <form>
    <label class="user-label">ğŸ”‘ í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
    <div class="uk-inline">
      <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
      <input class="uk-input uk-form-width-medium" type="password" aria-label="Not clickable icon" required />
    </div>
    <br />

    <label class="user-label">ğŸ”“ ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
    <div class="uk-inline">
      <input id="newpw" class="uk-input uk-form-width-medium" type="password" aria-label="Not clickable icon" required />
      <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
    </div>
    <br />
    <label class="user-label">ğŸ”’ ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
    <div class="uk-inline">
      <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
      <input id="newpw2" class="uk-input uk-form-width-medium" type="password" aria-label="Not clickable icon" required />
    </div>
    <label id="checkpw"></label>
    <br />
    <button class="user-submit-button uk-button uk-button-default" type="submit" onclick="return checkPassword()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½í•˜ê¸°</button>
  </form>
</div>