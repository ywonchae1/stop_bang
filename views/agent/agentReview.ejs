<script>
	function openForm() {
		document.getElementById("myForm").style.display = "block";
	}

	function closeForm() {
		document.getElementById("myForm").style.display = "none";
	}
</script>

<div class="display-review">
	<div class="layout-row" style="align-items: center;">
	  <div style="margin-right:10px"><%- review.r_username %></div>
	  <% for( let index = 0; index < 5; index++ ) { %>
	  <% if (index < review.rating) { %>
	  <p>â˜…</p>
	  <% } else { %>
	  <p>â˜†</p>
	  <% } %>
	  <% } %>
	  <div style="float:right; margin-left:auto">
		<label><%= review.created_time %></label>
		<label>ì‘ì„±</label>
		<% let isReported = false; %>
		<% if(report != undefined) { %>
			<% report.forEach(repo => { %>
			<% if(repo.repo_rv_id === review.rv_id) isReported = true; }); %>
		<% } %>
		<% if(!isReported) { %>
			<!-- A button to open the popup form -->
			<button class="uk-button uk-button-default" onclick="openForm()">ì‹ ê³ </button>

			<!-- The form -->
			<div class="form-popup" id="myForm">
				<form class="form-container" action=<%= `/review/report/${review.rv_id}` %>>
					<h3>ğŸš¨ë‚˜ìœ í›„ê¸°ì…ë‹ˆê¹Œ?ğŸš¨</h3>

					<label><b>ì‹ ê³  ì‚¬ìœ  ì„ íƒ</b></label>
					<div class="report-radio-container" name="reason">
						<label><input style="margin: 15px;" class="uk-radio" type="radio" name="reason" value=1>ì‚¬ì¹­/ì‚¬ê¸°</label>
						</br>
						<label><input style="margin: 15px;" class="uk-radio" type="radio" name="reason" value=2>ìš•ì„¤/ë¹„í•˜</label>
						</br>
						<label><input style="margin: 15px;" class="uk-radio" type="radio" name="reason" value=3>ë¶€ì ì ˆí•œ ë‚´ìš©</label>
					</div>

					<div style="text-align: center;">
						<button type="submit" class="btn">ì‹ ê³ </button>
						<button type="button" class="btn cancel" onclick="closeForm()">ì·¨ì†Œ</button>
					</div>
				</form>
			</div>
		<% } else { %>
			<lable>ì‹ ê³  ì™„ë£Œ</lable>
		<% } %>
	  </div>
	</div>
	<p><%- review.content %></p>
</div>